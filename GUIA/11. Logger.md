# Loggers

Con los logger podemos saber mediante un documento de texto o en consola que está
ocurriendo con nuestra aplicación cuando está siendo ejecutada.
Podriamos hacer esto mediante debuggin, pero en producción no podemos y para esto
la solución es usar loggers.

Con el servicio Ilogger de .net podemos centralizar el manejo de los mensajes de logs

Para comenzar a utilizarlo en el controlador basta con inyectarlo:

1. Inyectamos en el controlador

```csharp
public class PersonajesController : ControllerBase
{
    private readonly ApplicationDbContext _context;
    private readonly ILogger<PersonajesController> _logger; //<-- declaramos campo

    public PersonajesController(ApplicationDbContext context,
                                 ILogger<PersonajesController> logger) //<-- agregamos parametro
    {
        _context = context;
        _logger = logger; //<-- asignamos
    }
```

2. Utilización

```csharp
    [HttpGet("/lista-personajes")]
    public async Task<IEnumerable<Personaje>> Get()
    {
        _logger.LogError("Error: Método Get() llamado en PersonajesController.");
        _logger.LogCritical("Crítico: Método Get() llamado en PersonajesController.");
        _logger.LogTrace("Traza: Método Get() llamado en PersonajesController.");
        _logger.LogDebug("Iniciando el proceso para obtener la lista de personajes.");
        _logger.LogInformation("Obteniendo la lista de personajes.");
        return await _context.Personajes.ToListAsync();
    }
```

Al ejecutar el metodo Get se lanzarian los mensajes.

3. Configuración:
   Existen varios tipos de logs. (critical, trace, debug etc.) Para que seleccionar cuales quiero que se muestren debo configurarlo en "appsettings.json" o "appsettings.Development" las categorias agregando el namespace y opcionalmente el nombre de controlador a continuación para ser más especificos, ej: "StarWarsCRUD.Api.Controllers.PersonajesController" seguido del log al que queremos acceder.

```JSON
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=..."
  },
  "Logging": {
    "LogLevel": {
        "StarWarsCRUD.Api.Controllers.PersonajesController": "trace", <-- namespace y tipo de log
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}

```

Los logs se muestran en columna:

1. Critical
2. Error
3. Warning
4. Information
5. Debug
6. Trace

Si colocamos solo (default: information) se verá desde information para arriba, si seleccionamos trace partirá desde ahi para arriba.
